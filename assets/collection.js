class Collection extends HTMLElement{constructor(){super()}connectedCallback(){this.current_width=window.innerWidth,this.grid_container=this.querySelector(".collection--body--grid"),"loading"===document.readyState?window.on("DOMContentLoaded",()=>this.load()):this.load()}load(){this.matchImageHeights(),this.resizeListener(),this.updateProductsListener(),theme.settings.hover_image_enabled&&this.loadHoverImages()}matchImageHeights(){theme.utils.matchImageHeights(this.grid_container,this.querySelectorAll(".product--root"),".product--image-wrapper",this.querySelectorAll(".featured-content--root"))}resizeListener(){window.on("resize.Collection",theme.utils.debounce(100,()=>{this.current_width!==window.innerWidth&&(this.matchImageHeights(),this.current_width=window.innerWidth)}))}updateProductsListener(){window.on("theme:navigation:productsUpdated",()=>{this.matchImageHeights(),theme.settings.hover_image_enabled&&this.loadHoverImages()})}loadHoverImages(){this.querySelectorAll(".product--hover-image").forEach(t=>{theme.utils.imagesLoaded(t,()=>{const e=t.closest('[data-hover-image="true"]');e&&e.setAttribute("data-hover-image","loaded")})})}}customElements.define("collection-root",Collection);