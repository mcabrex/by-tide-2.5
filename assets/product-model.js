class ProductModel extends HTMLElement{constructor(){super(),theme.utils.stylesheetLoader("model","https://cdn.shopify.com/shopifycloud/model-viewer-ui/assets/v1.0/model-viewer-ui.css")}connectedCallback(){this.view=this.getAttribute("data-view"),this.json=JSON.parse(document.querySelector("#product-model--json").innerHTML),this.eventListeners(),window.Shopify.loadFeatures([{name:"shopify-xr",version:"1.0",onLoad:()=>this.loadShopifyXr()},{name:"model-viewer-ui",version:"1.0",onLoad:()=>this.loadModel()}])}eventListeners(){this.on("theme:section:load",()=>this.loadModel()),this.on("pauseMedia",()=>{this.model&&this.model.pause()}),this.on("playMedia",()=>{this.model&&this.model.play()}),window.on("resize.ProductModel",theme.utils.debounce(250,()=>this.trigger("pauseMedia")))}loadModel(){this.model||!Shopify.ModelViewerUI||"small"===theme.mqs.current_window&&"desktop"===this.view||"small"!==theme.mqs.current_window&&"mobile"===this.view||(this.model=new Shopify.ModelViewerUI(this.querySelector("model-viewer")),window.trigger("theme:product:mediaLoaded"))}loadShopifyXr(){window.ShopifyXR?this.models_added||(window.ShopifyXR.addModels(this.json),window.ShopifyXR.setupXRElements(),this.models_added=!0):document.addEventListener("shopify_xr_initialized",()=>this.loadShopifyXr())}}customElements.define("product-model-root",ProductModel);