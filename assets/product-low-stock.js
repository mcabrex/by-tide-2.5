class ProductLowStock extends HTMLElement{constructor(){super()}connectedCallback(){this.initial_availability="true"===this.dataset.initialAvailability,this.initial_quantity=parseInt(this.dataset.initialQuantity),this.root=this.closest(`[data-product-id='${this.dataset.id}']`),this.threshold=parseInt(this.dataset.threshold),this.variants_json=JSON.parse(this.querySelector("#product-low-stock--json").innerHTML),this.updateListener(),this.initial_availability?this.update(this.initial_quantity):this.hide()}updateListener(){this.root.on("variantUpdated",i=>{var t=this.variants_json.find(t=>t.id===i.detail.id);t&&t.available?this.update(t.quantity):this.hide()})}update(t){let i;!t||t<1||t>this.threshold?this.hide():(1===t?i=(i=theme.translations.low_in_stock.one).replace("&#39;","'"):1<t&&(i=(i=theme.translations.low_in_stock.other).replace(/\d+/,t).replace("&#39;","'")),this.innerText=i,this.show())}hide(){this.style.display="none",this.parentNode.setAttribute("data-empty",!0)}show(){this.style.display="block",this.parentNode.setAttribute("data-empty",!1)}}customElements.define("product-low-stock-root",ProductLowStock);